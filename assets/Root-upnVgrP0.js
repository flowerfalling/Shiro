var $e=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)};var _=(e,t,n)=>($e(e,t,"read from private field"),n?n.call(e):t.get(e)),fe=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},me=(e,t,n,s)=>($e(e,t,"write to private field"),s?s.call(e,n):t.set(e,n),n);var pe=(e,t,n)=>($e(e,t,"access private method"),n);import{r as l,c as Et,R as E,j as a,_ as mn}from"./index-UszForRq.js";import{s as It}from"./index-4U75uoTz.js";import{S as hn,m as gn,n as Lt,u as Ce,a as Ee,t as He,p as pn,q as xn,r as Cn}from"./owner-irBIrw7o.js";import{u as Mt,a as vn,b as bn,c as Fe,d as yn,e as at,f as En,g as wn,h as Rn,i as Pt,M as Sn,j as Ve,k as jn,l as _n,m as Tn,s as it,n as Q,o as Xe,E as On,p as kn}from"./Comments-paR051LY.js";import{p as Pe,j as Nn,I as An,A as ct,k as In}from"./utils-gwk-Vaz-.js";import{a as re,c as Te}from"./helper-H2rpVDS9.js";import{a as Je,I as Dt}from"./Gallery-sQat1r2F.js";import{f as Ft,j as Ln,k as Mn,d as Pn,F as Vt,l as Dn}from"./Markdown-IsKS0DK1.js";import{e as Fn,h as wt,u as lt,j as U,a as zt,s as Vn,f as zn}from"./utils-JxBG2tY2.js";import{A as Wn}from"./Collapse-iJ1FFFZR.js";import{m as De,S as Rt,M as Un}from"./StyledButton-s4ePjW7Q.js";import{f as St,g as Bn,p as $n}from"./LinkCard-oPf372cO.js";var le,ne,H,se,xe,Le,_e,Ze,At,Hn=(At=class extends hn{constructor(t,n){super();fe(this,xe);fe(this,_e);fe(this,le,void 0);fe(this,ne,void 0);fe(this,H,void 0);fe(this,se,void 0);me(this,ne,void 0),me(this,le,t),this.setOptions(n),this.bindMethods(),pe(this,xe,Le).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){var s;const n=this.options;this.options=_(this,le).defaultMutationOptions(t),Fn(n,this.options)||_(this,le).getMutationCache().notify({type:"observerOptionsUpdated",mutation:_(this,H),observer:this}),(s=_(this,H))==null||s.setOptions(this.options),n!=null&&n.mutationKey&&this.options.mutationKey&&wt(n.mutationKey)!==wt(this.options.mutationKey)&&this.reset()}onUnsubscribe(){var t;this.hasListeners()||(t=_(this,H))==null||t.removeObserver(this)}onMutationUpdate(t){pe(this,xe,Le).call(this),pe(this,_e,Ze).call(this,t)}getCurrentResult(){return _(this,ne)}reset(){var t;(t=_(this,H))==null||t.removeObserver(this),me(this,H,void 0),pe(this,xe,Le).call(this),pe(this,_e,Ze).call(this)}mutate(t,n){var s;return me(this,se,n),(s=_(this,H))==null||s.removeObserver(this),me(this,H,_(this,le).getMutationCache().build(_(this,le),this.options)),_(this,H).addObserver(this),_(this,H).execute(t)}},le=new WeakMap,ne=new WeakMap,H=new WeakMap,se=new WeakMap,xe=new WeakSet,Le=function(){var n;const t=((n=_(this,H))==null?void 0:n.state)??gn();me(this,ne,{...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset})},_e=new WeakSet,Ze=function(t){Lt.batch(()=>{var n,s,r,o,i,f,u,b;if(_(this,se)&&this.hasListeners()){const h=_(this,ne).variables,x=_(this,ne).context;(t==null?void 0:t.type)==="success"?((s=(n=_(this,se)).onSuccess)==null||s.call(n,t.data,h,x),(o=(r=_(this,se)).onSettled)==null||o.call(r,t.data,null,h,x)):(t==null?void 0:t.type)==="error"&&((f=(i=_(this,se)).onError)==null||f.call(i,t.error,h,x),(b=(u=_(this,se)).onSettled)==null||b.call(u,void 0,t.error,h,x))}this.listeners.forEach(h=>{h(_(this,ne))})})},At);function qn(e,t){const n=Ft(t),[s]=l.useState(()=>new Hn(n,e));l.useEffect(()=>{s.setOptions(e)},[s,e]);const r=l.useSyncExternalStore(l.useCallback(i=>s.subscribe(Lt.batchCalls(i)),[s]),()=>s.getCurrentResult(),()=>s.getCurrentResult()),o=l.useCallback((i,f)=>{s.mutate(i,f).catch(Kn)},[s]);if(r.error&&Ln(s.options.throwOnError,[r.error]))throw r.error;return{...r,mutate:o,mutateAsync:r.mutate}}function Kn(){}typeof window<"u"&&!window.global&&(window.global=typeof Et>"u"?window:Et);var Wt=Object.defineProperty,Gn=Object.getOwnPropertyDescriptor,Yn=Object.getOwnPropertyNames,Qn=Object.prototype.hasOwnProperty,Xn=(e,t)=>{for(var n in t)Wt(e,n,{get:t[n],enumerable:!0})},jt=(e,t,n,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of Yn(t))!Qn.call(e,r)&&r!==n&&Wt(e,r,{get:()=>t[r],enumerable:!(s=Gn(t,r))||s.enumerable});return e},Jn=(e,t,n)=>(jt(e,t,"default"),n&&jt(n,t,"default")),Zn=()=>{try{return!1}catch{}return!1},es=()=>{try{return!0}catch{}return!1},_t=new Set,ts=(e,t,n)=>{const s=Zn()||es(),r=n??e;_t.has(r)||s||(_t.add(r),console.warn(`Clerk - DEPRECATION WARNING: "${e}" is deprecated and will be removed in the next major release.
${t}`))},ns={Expired:"expired",Failed:"failed"};new Proxy(ns,{get(e,t,n){return ts("MagicLinkErrorCode","Use `EmailLinkErrorCode` instead."),Reflect.get(e,t,n)}});const ss="Clerk: You must wrap your application in a <ClerkProvider> component.",rs=e=>`Clerk: You've passed multiple children components to <${e}/>. You can only pass a single child component or text.`,os=e=>t=>{try{return E.Children.only(e)}catch{throw new Error(rs(t))}},as=(e,t)=>(e||(e=t),typeof e=="string"&&(e=E.createElement("button",null,e)),e),is=e=>(...t)=>{if(e&&typeof e=="function")return e(...t)},ue=()=>{},B=ue(),Me=Object,g=e=>e===B,G=e=>typeof e=="function",oe=(e,t)=>({...e,...t}),cs=e=>G(e.then),Ae=new WeakMap;let ls=0;const Se=e=>{const t=typeof e,n=e&&e.constructor,s=n==Date;let r,o;if(Me(e)===e&&!s&&n!=RegExp){if(r=Ae.get(e),r)return r;if(r=++ls+"~",Ae.set(e,r),n==Array){for(r="@",o=0;o<e.length;o++)r+=Se(e[o])+",";Ae.set(e,r)}if(n==Me){r="#";const i=Me.keys(e).sort();for(;!g(o=i.pop());)g(e[o])||(r+=o+":"+Se(e[o])+",");Ae.set(e,r)}}else r=s?e.toJSON():t=="symbol"?e.toString():t=="string"?JSON.stringify(e):""+e;return r},X=new WeakMap,qe={},Ie={},ut="undefined",ze=typeof window!=ut,et=typeof document!=ut,us=()=>ze&&typeof window.requestAnimationFrame!=ut,ce=(e,t)=>{const n=X.get(e);return[()=>!g(t)&&e.get(t)||qe,s=>{if(!g(t)){const r=e.get(t);t in Ie||(Ie[t]=r),n[5](t,oe(r,s),r||qe)}},n[6],()=>!g(t)&&t in Ie?Ie[t]:!g(t)&&e.get(t)||qe]};let tt=!0;const ds=()=>tt,[nt,st]=ze&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[ue,ue],fs=()=>{const e=et&&document.visibilityState;return g(e)||e!=="hidden"},ms=e=>(et&&document.addEventListener("visibilitychange",e),nt("focus",e),()=>{et&&document.removeEventListener("visibilitychange",e),st("focus",e)}),hs=e=>{const t=()=>{tt=!0,e()},n=()=>{tt=!1};return nt("online",t),nt("offline",n),()=>{st("online",t),st("offline",n)}},gs={isOnline:ds,isVisible:fs},ps={initFocus:ms,initReconnect:hs},Tt=!E.useId,je=!ze||"Deno"in window,xs=e=>us()?window.requestAnimationFrame(e):setTimeout(e,1),Re=je?l.useEffect:l.useLayoutEffect,Ke=typeof navigator<"u"&&navigator.connection,Ot=!je&&Ke&&(["slow-2g","2g"].includes(Ke.effectiveType)||Ke.saveData),de=e=>{if(G(e))try{e=e()}catch{e=""}const t=e;return e=typeof e=="string"?e:(Array.isArray(e)?e.length:e)?Se(e):"",[e,t]};let Cs=0;const rt=()=>++Cs,Ut=0,Bt=1,$t=2,vs=3;var we={__proto__:null,ERROR_REVALIDATE_EVENT:vs,FOCUS_EVENT:Ut,MUTATE_EVENT:$t,RECONNECT_EVENT:Bt};async function Ht(...e){const[t,n,s,r]=e,o=oe({populateCache:!0,throwOnError:!0},typeof r=="boolean"?{revalidate:r}:r||{});let i=o.populateCache;const f=o.rollbackOnError;let u=o.optimisticData;const b=o.revalidate!==!1,h=y=>typeof f=="function"?f(y):f!==!1,x=o.throwOnError;if(G(n)){const y=n,v=[],w=t.keys();for(const A of w)!/^\$(inf|sub)\$/.test(A)&&y(t.get(A)._k)&&v.push(A);return Promise.all(v.map(c))}return c(n);async function c(y){const[v]=de(y);if(!v)return;const[w,A]=ce(t,v),[d,K,T,O]=X.get(t),I=d[v],z=()=>b&&(delete T[v],delete O[v],I&&I[0])?I[0]($t).then(()=>w().data):w().data;if(e.length<3)return z();let m=s,p;const j=rt();K[v]=[j,0];const C=!g(u),L=w(),M=L.data,N=L._c,P=g(N)?M:N;if(C&&(u=G(u)?u(P,M):u,A({data:u,_c:P})),G(m))try{m=m(P)}catch($){p=$}if(m&&cs(m))if(m=await m.catch($=>{p=$}),j!==K[v][0]){if(p)throw p;return m}else p&&C&&h(p)&&(i=!0,m=P,A({data:m,_c:B}));i&&(p||(G(i)&&(m=i(m,P)),A({data:m,error:B,_c:B}))),K[v][1]=rt();const F=await z();if(A({_c:B}),p){if(x)throw p;return}return i?F:m}}const kt=(e,t)=>{for(const n in e)e[n][0]&&e[n][0](t)},qt=(e,t)=>{if(!X.has(e)){const n=oe(ps,t),s={},r=Ht.bind(B,e);let o=ue;const i={},f=(h,x)=>{const c=i[h]||[];return i[h]=c,c.push(x),()=>c.splice(c.indexOf(x),1)},u=(h,x,c)=>{e.set(h,x);const y=i[h];if(y)for(const v of y)v(x,c)},b=()=>{if(!X.has(e)&&(X.set(e,[s,{},{},{},r,u,f]),!je)){const h=n.initFocus(setTimeout.bind(B,kt.bind(B,s,Ut))),x=n.initReconnect(setTimeout.bind(B,kt.bind(B,s,Bt)));o=()=>{h&&h(),x&&x(),X.delete(e)}}};return b(),[e,r,b,o]}return[e,X.get(e)[4]]},bs=(e,t,n,s,r)=>{const o=n.errorRetryCount,i=r.retryCount,f=~~((Math.random()+.5)*(1<<(i<8?i:8)))*n.errorRetryInterval;!g(o)&&i>o||setTimeout(s,f,r)},ys=(e,t)=>Se(e)==Se(t),[We,Kt]=qt(new Map),Gt=oe({onLoadingSlow:ue,onSuccess:ue,onError:ue,onErrorRetry:bs,onDiscarded:ue,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:Ot?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:Ot?5e3:3e3,compare:ys,isPaused:()=>!1,cache:We,mutate:Kt,fallback:{}},gs),Yt=(e,t)=>{const n=oe(e,t);if(t){const{use:s,fallback:r}=e,{use:o,fallback:i}=t;s&&o&&(n.use=s.concat(o)),r&&i&&(n.fallback=oe(r,i))}return n},ot=l.createContext({}),Es=e=>{const{value:t}=e,n=l.useContext(ot),s=G(t),r=l.useMemo(()=>s?t(n):t,[s,n,t]),o=l.useMemo(()=>s?r:Yt(n,r),[s,n,r]),i=r&&r.provider,f=l.useRef(B);i&&!f.current&&(f.current=qt(i(o.cache||We),r));const u=f.current;return u&&(o.cache=u[0],o.mutate=u[1]),Re(()=>{if(u)return u[2]&&u[2](),u[3]},[]),l.createElement(ot.Provider,oe(e,{value:o}))},Qt=ze&&window.__SWR_DEVTOOLS_USE__,ws=Qt?window.__SWR_DEVTOOLS_USE__:[],Rs=()=>{Qt&&(window.__SWR_DEVTOOLS_REACT__=E)},Xt=e=>G(e[1])?[e[0],e[1],e[2]||{}]:[e[0],null,(e[1]===null?e[2]:e[1])||{}],Jt=()=>oe(Gt,l.useContext(ot)),Ss=(e,t)=>{const[n,s]=de(e),[,,,r]=X.get(We);if(r[n])return r[n];const o=t(s);return r[n]=o,o},js=e=>(t,n,s)=>e(t,n&&((...o)=>{const[i]=de(t),[,,,f]=X.get(We),u=f[i];return g(u)?n(...o):(delete f[i],u)}),s),_s=ws.concat(js),Ts=e=>function(...n){const s=Jt(),[r,o,i]=Xt(n),f=Yt(s,i);let u=e;const{use:b}=f,h=(b||[]).concat(_s);for(let x=h.length;x--;)u=h[x](u);return u(r,o||f.fetcher||null,f)},Os=(e,t,n)=>{const s=t[e]||(t[e]=[]);return s.push(n),()=>{const r=s.indexOf(n);r>=0&&(s[r]=s[s.length-1],s.pop())}},ks=(e,t)=>(...n)=>{const[s,r,o]=Xt(n),i=(o.use||[]).concat(t);return e(s,r,{...o,use:i})};Rs();const Ns=e=>de(e)[0],Nt=E.use||(e=>{if(e.status==="pending")throw e;if(e.status==="fulfilled")return e.value;throw e.status==="rejected"?e.reason:(e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t}),e)}),Ge={dedupe:!0},As=(e,t,n)=>{const{cache:s,compare:r,suspense:o,fallbackData:i,revalidateOnMount:f,revalidateIfStale:u,refreshInterval:b,refreshWhenHidden:h,refreshWhenOffline:x,keepPreviousData:c}=n,[y,v,w,A]=X.get(s),[d,K]=de(e),T=l.useRef(!1),O=l.useRef(!1),I=l.useRef(d),z=l.useRef(t),m=l.useRef(n),p=()=>m.current,j=()=>p().isVisible()&&p().isOnline(),[C,L,M,N]=ce(s,d),P=l.useRef({}).current,F=g(i)?n.fallback[d]:i,$=(R,S)=>{for(const V in P){const k=V;if(k==="data"){if(!r(R[k],S[k])&&(!g(R[k])||!r(Ne,S[k])))return!1}else if(S[k]!==R[k])return!1}return!0},be=l.useMemo(()=>{const R=!d||!t?!1:g(f)?p().isPaused()||o?!1:g(u)?!0:u:f,S=W=>{const ee=oe(W);return delete ee._k,R?{isValidating:!0,isLoading:!0,...ee}:ee},V=C(),k=N(),Y=S(V),ge=V===k?Y:S(k);let D=Y;return[()=>{const W=S(C());return $(W,D)?(D.data=W.data,D.isLoading=W.isLoading,D.isValidating=W.isValidating,D.error=W.error,D):(D=W,W)},()=>ge]},[s,d]),ae=It.useSyncExternalStore(l.useCallback(R=>M(d,(S,V)=>{$(V,S)||R()}),[s,d]),be[0],be[1]),Oe=!T.current,J=y[d]&&y[d].length>0,ie=ae.data,Z=g(ie)?F:ie,ke=ae.error,gt=l.useRef(Z),Ne=c?g(ie)?gt.current:ie:Z,pt=J&&!g(ke)?!1:Oe&&!g(f)?f:p().isPaused()?!1:o?g(Z)?!1:u:g(Z)||u,xt=!!(d&&t&&Oe&&pt),un=g(ae.isValidating)?xt:ae.isValidating,dn=g(ae.isLoading)?xt:ae.isLoading,ye=l.useCallback(async R=>{const S=z.current;if(!d||!S||O.current||p().isPaused())return!1;let V,k,Y=!0;const ge=R||{},D=!w[d]||!ge.dedupe,W=()=>Tt?!O.current&&d===I.current&&T.current:d===I.current,ee={isValidating:!1,isLoading:!1},vt=()=>{L(ee)},bt=()=>{const q=w[d];q&&q[1]===k&&delete w[d]},yt={isValidating:!0};g(C().data)&&(yt.isLoading=!0);try{if(D&&(L(yt),n.loadingTimeout&&g(C().data)&&setTimeout(()=>{Y&&W()&&p().onLoadingSlow(d,n)},n.loadingTimeout),w[d]=[S(K),rt()]),[V,k]=w[d],V=await V,D&&setTimeout(bt,n.dedupingInterval),!w[d]||w[d][1]!==k)return D&&W()&&p().onDiscarded(d),!1;ee.error=B;const q=v[d];if(!g(q)&&(k<=q[0]||k<=q[1]||q[1]===0))return vt(),D&&W()&&p().onDiscarded(d),!1;const te=C().data;ee.data=r(te,V)?te:V,D&&W()&&p().onSuccess(V,d,n)}catch(q){bt();const te=p(),{shouldRetryOnError:Ue}=te;te.isPaused()||(ee.error=q,D&&W()&&(te.onError(q,d,te),(Ue===!0||G(Ue)&&Ue(q))&&j()&&te.onErrorRetry(q,d,te,fn=>{const Be=y[d];Be&&Be[0]&&Be[0](we.ERROR_REVALIDATE_EVENT,fn)},{retryCount:(ge.retryCount||0)+1,dedupe:!0})))}return Y=!1,vt(),!0},[d,s]),Ct=l.useCallback((...R)=>Ht(s,I.current,...R),[]);if(Re(()=>{z.current=t,m.current=n,g(ie)||(gt.current=ie)}),Re(()=>{if(!d)return;const R=ye.bind(B,Ge);let S=0;const k=Os(d,y,(Y,ge={})=>{if(Y==we.FOCUS_EVENT){const D=Date.now();p().revalidateOnFocus&&D>S&&j()&&(S=D+p().focusThrottleInterval,R())}else if(Y==we.RECONNECT_EVENT)p().revalidateOnReconnect&&j()&&R();else{if(Y==we.MUTATE_EVENT)return ye();if(Y==we.ERROR_REVALIDATE_EVENT)return ye(ge)}});return O.current=!1,I.current=d,T.current=!0,L({_k:K}),pt&&(g(Z)||je?R():xs(R)),()=>{O.current=!0,k()}},[d]),Re(()=>{let R;function S(){const k=G(b)?b(C().data):b;k&&R!==-1&&(R=setTimeout(V,k))}function V(){!C().error&&(h||p().isVisible())&&(x||p().isOnline())?ye(Ge).then(S):S()}return S(),()=>{R&&(clearTimeout(R),R=-1)}},[b,h,x,d]),l.useDebugValue(Ne),o&&g(Z)&&d){if(!Tt&&je)throw new Error("Fallback data is required when using suspense in SSR.");z.current=t,m.current=n,O.current=!1;const R=A[d];if(!g(R)){const S=Ct(R);Nt(S)}if(g(ke)){const S=ye(Ge);g(Ne)||(S.status="fulfilled",S.value=!0),Nt(S)}else throw ke}return{mutate:Ct,get data(){return P.data=!0,Ne},get error(){return P.error=!0,ke},get isValidating(){return P.isValidating=!0,un},get isLoading(){return P.isLoading=!0,dn}}},Zt=Me.defineProperty(Es,"defaultValue",{value:Gt}),dt=Ts(As),Is=Object.freeze(Object.defineProperty({__proto__:null,SWRConfig:Zt,default:dt,mutate:Kt,preload:Ss,unstable_serialize:Ns,useSWRConfig:Jt},Symbol.toStringTag,{value:"Module"})),Ls="$inf$",Ms=e=>de(e?e(0,null):null)[0],Ye=Promise.resolve(),Ps=e=>(t,n,s)=>{const r=l.useRef(!1),{cache:o,initialSize:i=1,revalidateAll:f=!1,persistSize:u=!1,revalidateFirstPage:b=!0,revalidateOnMount:h=!1,parallel:x=!1}=s;let c;try{c=Ms(t),c&&(c=Ls+c)}catch{}const[y,v,w]=ce(o,c),A=l.useCallback(()=>g(y()._l)?i:y()._l,[o,c,i]);It.useSyncExternalStore(l.useCallback(m=>c?w(c,()=>{m()}):()=>{},[o,c]),A,A);const d=l.useCallback(()=>{const m=y()._l;return g(m)?i:m},[c,i]),K=l.useRef(d());Re(()=>{if(!r.current){r.current=!0;return}c&&v({_l:u?K.current:d()})},[c,o]);const T=h&&!r.current,O=e(c,async m=>{const p=y()._i,j=[],C=d(),[L]=ce(o,m),M=L().data,N=[];let P=null;for(let F=0;F<C;++F){const[$,be]=de(t(F,x?null:P));if(!$)break;const[ae,Oe]=ce(o,$);let J=ae().data;const ie=f||p||g(J)||b&&!F&&!g(M)||T||M&&!g(M[F])&&!s.compare(M[F],J);if(n&&ie){const Z=async()=>{J=await n(be),Oe({data:J,_k:be}),j[F]=J};x?N.push(Z):await Z()}else j[F]=J;x||(P=J)}return x&&await Promise.all(N.map(F=>F())),v({_i:B}),j},s),I=l.useCallback(function(m,p){const j=typeof p=="boolean"?{revalidate:p}:p||{},C=j.revalidate!==!1;return c?(C&&(g(m)?v({_i:!0}):v({_i:!1})),arguments.length?O.mutate(m,{...j,revalidate:C}):O.mutate()):Ye},[c,o]),z=l.useCallback(m=>{if(!c)return Ye;const[,p]=ce(o,c);let j;if(G(m)?j=m(d()):typeof m=="number"&&(j=m),typeof j!="number")return Ye;p({_l:j}),K.current=j;const C=[],[L]=ce(o,c);let M=null;for(let N=0;N<j;++N){const[P]=de(t(N,M)),[F]=ce(o,P),$=P?F().data:B;if(g($))return I(L().data);C.push($),M=$}return I(C)},[c,o,I,d]);return{size:d(),setSize:z,mutate:I,get data(){return O.data},get error(){return O.error},get isValidating(){return O.isValidating},get isLoading(){return O.isLoading}}},Ds=ks(dt,Ps);function Fs(e,t){if(!e)throw typeof t=="string"?new Error(t):new Error(`${t.displayName} not found`)}var ve=(e,t)=>{const{assertCtxFn:n=Fs}=t||{},s=E.createContext(void 0);return s.displayName=e,[s,()=>{const i=E.useContext(s);return n(i,`${e} not found`),i.value},()=>{const i=E.useContext(s);return i?i.value:{}}]},en={};Xn(en,{SWRConfig:()=>Zt,useSWR:()=>dt,useSWRInfinite:()=>Ds});Jn(en,Is);var[Vs,zs]=ve("ClerkInstanceContext"),[Ar,Ws]=ve("UserContext");ve("ClientContext");ve("SessionContext");ve("OrganizationContext");typeof window<"u"?E.useLayoutEffect:E.useEffect;const[Ir,Us]=[Vs,zs];function Bs(e){if(!e)throw new Error(ss)}const $s=Object.freeze({noGuarantees:Object.freeze({guaranteedLoaded:!1}),guaranteedLoaded:Object.freeze({guaranteedLoaded:!0})}),ft=E.createContext(void 0);ft.displayName="StructureContext";const Hs=()=>{const e=E.useContext(ft);return Bs(e),e},qs=({children:e})=>Hs().guaranteedLoaded?E.createElement(E.Fragment,null,e):E.createElement(ft.Provider,{value:$s.guaranteedLoaded},e),he=(e,t)=>{t=t||e.displayName||e.name||"Component",e.displayName=t;const n=s=>{const r=Us();return r.loaded?E.createElement(qs,null,E.createElement(e,{...s,clerk:r})):null};return n.displayName=`withClerk(${t})`,n},[Lr,tn]=ve("AuthContext");function nn(){const e=Ws();return e===void 0?{isLoaded:!1,isSignedIn:void 0,user:void 0}:e===null?{isLoaded:!0,isSignedIn:!1,user:null}:{isLoaded:!0,isSignedIn:!0,user:e}}const Ks=({children:e})=>{const{userId:t}=tn();return t?E.createElement(E.Fragment,null,e):null},Gs=({children:e})=>{const{userId:t}=tn();return t===null?E.createElement(E.Fragment,null,e):null};he(({clerk:e,...t})=>{const{client:n,session:s}=e,{__unstable__environment:r}=e,o=n.activeSessions&&n.activeSessions.length>0;return E.useEffect(()=>{if(s===null&&o&&r){const{afterSignOutOneUrl:i}=r.displayConfig;e.navigate(i)}else e.redirectToSignIn(t)},[]),null},"RedirectToSignIn");he(({clerk:e,...t})=>(E.useEffect(()=>{e.redirectToSignUp(t)},[]),null),"RedirectToSignUp");he(({clerk:e})=>(E.useEffect(()=>{e.redirectToUserProfile()},[]),null),"RedirectToUserProfile");he(({clerk:e})=>(E.useEffect(()=>{e.redirectToOrganizationProfile()},[]),null),"RedirectToOrganizationProfile");he(({clerk:e})=>(E.useEffect(()=>{e.redirectToCreateOrganization()},[]),null),"RedirectToCreateOrganization");he(({clerk:e,...t})=>(E.useEffect(()=>{e.handleRedirectCallback(t)},[]),null),"AuthenticateWithRedirectCallback");const Ys=he(({clerk:e,children:t,...n})=>{const{afterSignInUrl:s,afterSignUpUrl:r,redirectUrl:o,mode:i,...f}=n;t=as(t,"Sign in");const u=os(t)("SignInButton"),b=()=>{const c={afterSignInUrl:s,afterSignUpUrl:r,redirectUrl:o};return i==="modal"?e.openSignIn(c):e.redirectToSignIn(c)},x={...f,onClick:async c=>(await is(u.props.onClick)(c),b())};return E.cloneElement(u,x)},"SignInButton"),Qs=Ks,Xs=Gs;function Js({className:e}){return a.jsx("i",{className:re("icon-[mingcute--send-plane-line]",e)})}const Zs=()=>{const e=Rn(),t=Pt();return a.jsxs("span",{className:re("font-mono text-[10px]",e?"text-red-500":"text-zinc-500"),children:[t.length,"/",Sn]})},er=()=>{const e=Ce(),t=at(),n=lt(Fe().isWhisper),s=Ve();return e||t?null:a.jsxs("label",{className:"label mx-2 flex items-center",children:[a.jsx("input",{className:"checkbox-accent checkbox checkbox-sm mr-2",checked:n,type:"checkbox",onChange:r=>{const o=r.target.checked;s("isWhisper",o)}}),a.jsx("span",{className:"label-text text-sm",children:"悄悄话"})]})},tr=()=>{const e=Ce(),t=lt(Fe().syncToRecently),n=Ve(),s=at();return!e||s?null:a.jsxs("label",{className:"label mx-2 flex items-center",children:[a.jsx("input",{className:"checkbox-accent checkbox checkbox-sm mr-2",checked:t,type:"checkbox",onChange:r=>{const o=r.target.checked;n("syncToRecently",o)}}),a.jsx("span",{className:"label-text text-sm",children:"同步到碎碎念"})]})},mt=({className:e})=>{const t=Mt();return a.jsxs("footer",{className:Te("mt-3 flex h-5 w-full min-w-0 items-center justify-between",e),children:[a.jsxs("span",{className:re("flex-1 select-none text-[10px] text-zinc-500 transition-opacity"),children:[a.jsxs("span",{className:"hidden md:inline",children:["支持 ",a.jsx("b",{children:"Markdown"})," 与"," ",a.jsx(Mn,{href:"https://docs.github.com/zh/get-started/writing-on-github/getting-started-with-writing-and-formatting-on-github/basic-writing-and-formatting-syntax",children:"GFM"})]}),a.jsx(vn,{})]}),a.jsx(Wn,{children:t&&a.jsxs(De.aside,{initial:{opacity:0,scale:.96,y:8},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.98,y:8},className:"flex select-none items-center gap-2.5",children:[a.jsx(Zs,{}),a.jsx(er,{}),a.jsx(tr,{}),a.jsx(nr,{})]},"send-button-wrapper")})]})},nr=()=>{const e=bn(),{text:t,author:n,mail:s,url:r,source:o,avatar:i,isWhisper:f,syncToRecently:u}=Fe(),{afterSubmit:b}=yn(),h=Ce(),x=Ft(),c=at(),y=En(),v=wn(),w=T=>(v==null||v(T),T),{mutate:A,isPending:d}=qn({mutationFn:async T=>{const O=U.get(t),I=U.get(n),z=U.get(s),m=U.get(i),p=U.get(o),j=U.get(r),C={text:O,author:I,mail:z,avatar:m,source:p,url:j};if(h&&(delete C.source,delete C.avatar),Object.keys(C).forEach(N=>{C[N]===""&&delete C[N]}),c)return h?Ee.comment.proxy.master.reply(T).post({data:{text:O}}).then(w):Ee.comment.reply(T,C).then(w);const L=U.get(f),M=U.get(u);return h?Ee.comment.proxy.master.comment(T).post({data:{text:O}}).then(async N=>(M&&Ee.recently.proxy.post({data:{content:O,ref:T}}).then(()=>{He.success("已同步到碎碎念")}),N)).then(w):(C.isWhispers=L,Ee.comment.comment(T,C).then(w))},mutationKey:[e,"comment"],onError(T){He.error(pn(T))},onSuccess(T){b==null||b();const O=h?"发表成功啦~":c?"感谢你的回复！":"感谢你的评论！",I=jn(y);He.success(O),U.set(t,""),x.setQueryData(I,z=>z&&(c?Pe(z,m=>{const p=(C,L,M)=>{if(C.id===L)return C.children||(C.children=[]),C.children.push({...M,new:!0}),!0;if(C.children){for(const N of C.children)if(p(N,L,M))return!0;return!1}},j={...T,new:!0};for(const C of m.pages)for(const L of C.data)if(p(L,e,j))break}):Pe(z,m=>{m.pages[0].data.unshift({...T,new:!0})})))}}),K=()=>{A(e)};return a.jsxs(De.button,{className:"flex appearance-none items-center space-x-1 disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50",whileHover:{scale:1.05},whileTap:{scale:.95},type:"button",disabled:d,onClick:K,children:[a.jsx(Js,{className:"h-5 w-5 text-zinc-800 dark:text-zinc-200"}),a.jsx(De.span,{className:"text-sm",layout:"size",children:d?"送信...":"送信"})]})},sr=()=>{const e="bg-gray-200/50 dark:bg-zinc-800/50";return a.jsxs("div",{className:"flex animate-pulse gap-4",children:[a.jsx("div",{className:re("h-12 w-12 self-end overflow-hidden rounded-full",e)}),a.jsx("div",{className:re("h-[150px] w-full rounded-lg",e)})]})},sn=l.forwardRef((e,t)=>{const{className:n,children:s,...r}=e,o=St(0),i=St(0),f=l.useCallback(({clientX:x,clientY:c,currentTarget:y})=>{const v=y.getBoundingClientRect();o.set(x-v.left),i.set(c-v.top)},[o,i]),u=Bn`radial-gradient(320px circle at ${o}px ${i}px, var(--spotlight-color) 0%, transparent 85%)`,b=xn(),h=Nn(e);return a.jsxs("div",{className:"group relative h-full [--spotlight-color:hsl(var(--a)_/_0.05)]",onMouseMove:f,children:[!b&&a.jsx(De.div,{className:"pointer-events-none absolute left-0 right-0 top-0 z-0 h-[150px] rounded-xl opacity-0 transition-opacity duration-500 group-hover:opacity-100",style:{background:u},"aria-hidden":"true"}),a.jsx("textarea",{ref:t,className:Te("h-full w-full resize-none bg-transparent","overflow-auto px-3 py-4","text-neutral-900/80 dark:text-slate-100/80",n),...r,...h}),s]})});sn.displayName="TextArea";const rr=Pn(()=>mn(()=>import("./EmojiPicker-BXI2edok.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]),import.meta.url).then(e=>e.EmojiPicker)),ht=()=>{const e=Je(()=>_n()),t=Ve(),n=Pt(),s=l.useRef(null),r=l.useCallback(o=>{if(!s.current)return;const i=s.current,f=i.selectionStart,u=i.selectionEnd;i.value=`${i.value.substring(0,f)} ${o} ${i.value.substring(u,i.value.length)}`,t("text",i.value),requestAnimationFrame(()=>{const b=f+o.length+2;i.selectionStart=b,i.selectionEnd=b,i.focus()})},[]);return l.useEffect(()=>{const o=s.current;o&&n!==o.value&&(o.value=n)},[n]),l.useLayoutEffect(()=>{const o=s.current;o&&(o.selectionStart=o.selectionEnd=o.value.length,o.focus())},[]),a.jsx(sn,{ref:s,defaultValue:n,onChange:o=>t("text",o.target.value),placeholder:e,children:a.jsx(Tn,{children:a.jsx(Vt,{trigger:"click",TriggerComponent:or,headless:!0,children:a.jsx(rr,{onEmojiSelect:r})})})})},or=()=>a.jsxs("button",{className:"ml-0 inline-flex h-5 w-5 translate-y-1 text-base center md:ml-4",onClick:$n,children:[a.jsx("i",{className:"icon-[mingcute--emoji-2-line]"}),a.jsx("span",{className:"sr-only",children:"表情"})]}),ar=()=>{const{user:e}=nn(),t=Ve(),n=e?e.fullName||e.lastName||e.firstName||"Anonymous":"";return l.useEffect(()=>{var s;e&&(t("author",n),t("avatar",e.profileImageUrl),t("mail",((s=e.primaryEmailAddress)==null?void 0:s.emailAddress)||""))},[n,e]),e?a.jsxs("div",{className:"flex space-x-4",children:[a.jsx("div",{className:re("mb-2 flex-shrink-0 select-none self-end overflow-hidden rounded-full",'dark:ring-zinc-800" bg-zinc-200 ring-2 ring-zinc-200 dark:bg-zinc-800',"ml-[2px] backface-hidden"),children:a.jsx(Dt,{className:"rounded-full object-cover",src:e.profileImageUrl,alt:`${n}'s avatar`,width:48,height:48})}),a.jsx("div",{className:"relative h-[150px] w-full rounded-lg bg-gray-200/50 pb-5 dark:bg-zinc-800/50",children:a.jsx(ht,{})}),a.jsx(mt,{className:"absolute bottom-0 left-12 right-0 mb-2 ml-4 w-auto px-4"})]}):a.jsx(sr,{})};zt({});const rn=l.createContext(null),on=l.createContext(null),an=()=>l.useContext(rn),ir=()=>l.useContext(on),cr=e=>{const{showErrorMessage:t=!0,...n}=e,s=Je(()=>zt({}));return a.jsx(rn.Provider,{value:Je(()=>({showErrorMessage:t,fields:s,getField:r=>U.get(s)[r],addField:(r,o)=>{U.set(s,i=>({...i,[r]:o}))},removeField:r=>{U.set(s,o=>{const i={...o};return delete i[r],i})}})),children:a.jsx(on.Provider,{value:l.useMemo(()=>({showErrorMessage:t}),[t]),children:a.jsx(lr,{...n})})})},lr=e=>{const{onSubmit:t,...n}=e,s=an().fields,r=l.useCallback(async o=>{o.preventDefault();const i=U.get(s);for await(const[f,u]of Object.entries(i)){const b=u.$ref;if(!b)continue;const h=b.value,x=u.rules;for(let c=0;c<x.length;c++){const y=x[c];try{if(!await y.validator(h)){console.error(`Form validation failed, at field \`${f}\`, got value \`${h}\``),b.focus(),y.message&&U.set(s,w=>Pe(w,A=>{A[f].rules[c].status="error"}));return}}catch(v){console.error("validate function throw error",v);return}}}t==null||t(o)},[t]);return a.jsx("form",{onSubmit:r,...n,children:e.children})},cn=l.memo(({className:e,rules:t,onKeyDown:n,...s})=>{const r=an();if(!r)throw new Error("FormInput must be used inside <FormContext />");const{showErrorMessage:o}=ir(),{addField:i,removeField:f,fields:u}=r,b=l.useRef(null),h=lt(Vn(u,l.useCallback(c=>{var y,v;if(s.name)return(v=(y=c[s.name])==null?void 0:y.rules.find(w=>w.status==="error"))==null?void 0:v.message},[s.name])));l.useEffect(()=>{const c=s.name;if(t&&c)return i(c,{rules:t,$ref:b.current}),()=>{f(c)}},[s.name,t]);const x=l.useCallback(c=>{n&&n(c),U.set(u,y=>Pe(y,v=>{s.name&&v[s.name].rules.forEach(w=>{w.status==="error"&&(w.status="success")})}))},[u,n,s.name]);return a.jsxs(a.Fragment,{children:[a.jsx(An,{ref:b,className:Te(!!h&&"ring-2 ring-red-400 dark:ring-orange-700","w-full",e),type:"text",onKeyDown:x,...s}),o&&a.jsx(ct,{duration:.2,children:a.jsx("p",{className:"text-left text-sm text-red-400 dark:text-orange-700",children:h})})]})});cn.displayName="FormInput";const ur=()=>Ce()?a.jsx(mr,{}):a.jsx(fr,{}),ln="relative h-[150px] w-full rounded-lg bg-gray-200/50 pb-5 dark:bg-zinc-800/50",dr={author:"昵称",mail:"邮箱",url:"网址"},Qe=e=>{const{fieldKey:t,required:n}=e,[s,r]=zn(Fe()[t]);return a.jsx(cn,{type:"text",value:s,onChange:o=>r(o.target.value),required:n,placeholder:dr[t]+(n?" *":""),className:"border-0 bg-gray-200/50 dark:bg-zinc-800/50"})},fr=()=>a.jsxs(cr,{className:"flex flex-col space-y-4 px-2 pt-2",showErrorMessage:!1,children:[a.jsxs("div",{className:"flex flex-col space-x-0 space-y-4 md:flex-row md:space-x-4 md:space-y-0",children:[a.jsx(Qe,{fieldKey:"author",required:!0}),a.jsx(Qe,{fieldKey:"mail",required:!0}),a.jsx(Qe,{fieldKey:"url"})]}),a.jsx("div",{className:Te(ln,"pb-8"),children:a.jsx(ht,{})}),a.jsx(mt,{className:"absolute bottom-4 left-0 right-4 mb-2 ml-4 w-auto px-4"})]}),mr=()=>{const e=Cn(t=>t.user);return a.jsxs("div",{className:"flex space-x-4",children:[a.jsx("div",{className:re("mb-2 flex-shrink-0 select-none self-end overflow-hidden rounded-full",'dark:ring-zinc-800" bg-zinc-200 ring-2 ring-zinc-200 dark:bg-zinc-800',"ml-[2px] backface-hidden"),children:a.jsx(Dt,{className:"rounded-full object-cover",src:e.avatar,alt:`${e.name||e.username}'s avatar`,width:48,height:48})}),a.jsx("div",{className:ln,children:a.jsx(ht,{})}),a.jsx(mt,{className:"absolute bottom-0 left-12 right-0 mb-2 ml-4 w-auto px-4"})]})};function hr(e){return a.jsx("svg",{width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:a.jsx("path",{d:"M11 15H7C4.79086 15 3 16.7909 3 19C3 20.1046 3.89543 21 5 21H15M16.8744 13C16.2164 13.4935 15.6221 14.066 15.1049 14.7043C15.035 14.7906 15 14.8953 15 15M16.8744 17C16.2164 16.5065 15.6221 15.934 15.1049 15.2957C15.035 15.2094 15 15.1047 15 15M15 15H21M15 7C15 9.20914 13.2091 11 11 11C8.79086 11 7 9.20914 7 7C7 4.79086 8.79086 3 11 3C13.2091 3 15 4.79086 15 7Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}function gr(){const e=Dn();return a.jsxs("div",{className:"flex h-[150px] w-full space-x-4 rounded-lg bg-gray-100/80 center dark:bg-zinc-900/80",children:[a.jsx(Rt,{variant:"secondary",type:"button",onClick:()=>{it(Q.legacy)},children:"免登录评论"}),a.jsx(Ys,{mode:"modal",redirectUrl:In(e).href,children:a.jsxs(Rt,{variant:"primary",type:"button",children:[a.jsx(hr,{className:"mr-1 h-5 w-5"}),"登录后才可以留言噢"]})})]})}const pr=()=>{const e=Xe(),t=`转换到${e===Q.legacy?"新":"旧"}版评论`,n=Mt(),s=!!nn(),r=l.useRef(function(){const f=Xe();return a.jsxs(a.Fragment,{children:[a.jsx("i",{className:re(f===Q.legacy?"icon-[mingcute--user-4-line]":"icon-[material-symbols--dynamic-form-outline]")}),a.jsx("span",{className:"sr-only",children:t})]})}).current;return Ce()?null:a.jsx(Un,{className:re("absolute left-0 top-0 z-10 rounded-full text-sm","h-6 w-6 border border-slate-200 dark:border-neutral-800","bg-slate-100 dark:bg-neutral-900","flex cursor-pointer text-base-100/50 center","text-base-content/50","opacity-0 transition-opacity duration-200 group-[:hover]:opacity-100",e===Q.legacy&&"bottom-0 top-auto",n||s&&e===Q["with-auth"]&&"invisible opacity-0"),onClick:()=>{it(e===Q.legacy?Q["with-auth"]:Q.legacy)},children:a.jsx(Vt,{TriggerComponent:r,children:t})})},Mr=e=>{const{refId:t,className:n,afterSubmit:s,initialValue:r}=e,o=Xe(),i=Ce();return l.useEffect(()=>{i&&it(Q.legacy)},[i]),a.jsx(On,{children:a.jsx(kn,{refId:t,afterSubmit:s,initialValue:r,children:a.jsxs("div",{className:Te("group relative w-full min-w-0",n),"data-hide-print":!0,children:[a.jsx(pr,{}),a.jsx("div",{className:"relative w-full",children:o===Q.legacy?a.jsx(xr,{}):a.jsx(Cr,{})})]})})})},xr=()=>a.jsx(ct,{children:a.jsx(ur,{})}),Cr=()=>a.jsxs(ct,{children:[a.jsx(Xs,{children:a.jsx(gr,{})}),a.jsx(Qs,{children:a.jsx(ar,{})})]});export{Mr as C};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["./EmojiPicker-BXI2edok.js","./index-UszForRq.js","./index-56MkI4ud.css","./Markdown-IsKS0DK1.js","./helper-H2rpVDS9.js","./spring-XYYsQbff.js","./StyledButton-s4ePjW7Q.js","./LinkCard-oPf372cO.js","./Divider-ohHU5HmP.js","./owner-irBIrw7o.js","./utils-JxBG2tY2.js","./LinkCard-99mD7oov.css","./Collapse-iJ1FFFZR.js","./Gallery-sQat1r2F.js","./Gallery-cCMf-PmV.css","./RichLink-cHuYWSr_.js","./Markdown-v7di3Krj.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}