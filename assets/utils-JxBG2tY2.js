import{r as M,R as it}from"./index-UszForRq.js";var E={BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1};let ut=0;function B(t,e){const o=`atom${++ut}`,f={toString:()=>o};return typeof t=="function"?f.read=t:(f.init=t,f.read=function(h){return h(this)},f.write=function(h,l,w){return l(this,typeof w=="function"?w(h(this)):w)}),e&&(f.write=e),f}const C=t=>"init"in t,V=t=>!!t.write,T=new WeakMap,ct=(t,e)=>{T.set(t,e),t.catch(()=>{}).finally(()=>T.delete(t))},H=(t,e)=>{const o=T.get(t);o&&(T.delete(t),o(e))},Q=(t,e)=>{t.status="fulfilled",t.value=e},Y=(t,e)=>{t.status="rejected",t.reason=e},ft=t=>typeof(t==null?void 0:t.then)=="function",P=(t,e)=>!!t&&"v"in t&&"v"in e&&Object.is(t.v,e.v),G=(t,e)=>!!t&&"e"in t&&"e"in e&&Object.is(t.e,e.e),O=t=>!!t&&"v"in t&&t.v instanceof Promise,lt=(t,e)=>"v"in t&&"v"in e&&t.v.orig&&t.v.orig===e.v.orig,R=t=>{if("e"in t)throw t.e;return t.v},dt=()=>{const t=new WeakMap,e=new WeakMap,o=new Map;let f,h;(E?"production":void 0)!=="production"&&(f=new Set,h=new Set);const l=n=>t.get(n),w=(n,s)=>{(E?"production":void 0)!=="production"&&Object.freeze(s);const u=t.get(n);if(t.set(n,s),o.has(n)||o.set(n,u),O(u)){const r="v"in s?s.v instanceof Promise?s.v:Promise.resolve(s.v):Promise.reject(s.e);u.v!==r&&H(u.v,r)}},v=(n,s,u)=>{const r=new Map;let c=!1;u.forEach((a,i)=>{!a&&i===n&&(a=s),a?(r.set(i,a),s.d.get(i)!==a&&(c=!0)):(E?"production":void 0)!=="production"&&console.warn("[Bug] atom state not found")}),(c||s.d.size!==r.size)&&(s.d=r)},p=(n,s,u)=>{const r=l(n),c={d:(r==null?void 0:r.d)||new Map,v:s};if(u&&v(n,c,u),P(r,c)&&r.d===c.d)return r;if(O(r)&&O(c)&&lt(r,c)){if(r.d===c.d)return r;c.v=r.v}return w(n,c),c},g=(n,s,u,r)=>{if(ft(s)){let c;const a=()=>{const d=l(n);if(!O(d)||d.v!==i)return;const S=p(n,i,u);e.has(n)&&d.d!==S.d&&q(n,S,d.d)},i=new Promise((d,S)=>{let y=!1;s.then(_=>{y||(y=!0,Q(i,_),d(_),a())},_=>{y||(y=!0,Y(i,_),S(_),a())}),c=_=>{y||(y=!0,_.then(m=>Q(i,m),m=>Y(i,m)),d(_))}});return i.orig=s,i.status="pending",ct(i,d=>{d&&c(d),r==null||r()}),p(n,i,u)}return p(n,s,u)},A=(n,s,u)=>{const r=l(n),c={d:(r==null?void 0:r.d)||new Map,e:s};return u&&v(n,c,u),G(r,c)&&r.d===c.d?r:(w(n,c),c)},b=(n,s)=>{const u=l(n);if(!s&&u&&(e.has(n)||Array.from(u.d).every(([y,_])=>{if(y===n)return!0;const m=b(y);return m===_||P(m,_)})))return u;const r=new Map;let c=!0;const a=y=>{if(y===n){const m=l(y);if(m)return r.set(y,m),R(m);if(C(y))return r.set(y,void 0),y.init;throw new Error("no atom init")}const _=b(y);return r.set(y,_),R(_)};let i,d;const S={get signal(){return i||(i=new AbortController),i.signal},get setSelf(){return(E?"production":void 0)!=="production"&&!V(n)&&console.warn("setSelf function cannot be used with read-only atom"),!d&&V(n)&&(d=(...y)=>{if((E?"production":void 0)!=="production"&&c&&console.warn("setSelf function cannot be called in sync"),!c)return I(n,...y)}),d}};try{const y=n.read(a,S);return g(n,y,r,()=>i==null?void 0:i.abort())}catch(y){return A(n,y,r)}finally{c=!1}},F=n=>R(b(n)),ot=n=>{let s=e.get(n);return s||(s=N(n)),s},k=(n,s)=>!s.l.size&&(!s.t.size||s.t.size===1&&s.t.has(n)),rt=n=>{const s=e.get(n);s&&k(n,s)&&D(n)},W=n=>{const s=new Map,u=new WeakMap,r=i=>{var d;const S=new Set((d=e.get(i))==null?void 0:d.t);return o.forEach((y,_)=>{var m;(m=l(_))!=null&&m.d.has(i)&&S.add(_)}),S},c=i=>{r(i).forEach(d=>{d!==i&&(s.set(d,(s.get(d)||new Set).add(i)),u.set(d,(u.get(d)||0)+1),c(d))})};c(n);const a=i=>{r(i).forEach(d=>{var S;if(d!==i){let y=u.get(d);if(y&&u.set(d,--y),!y){let _=!!((S=s.get(d))!=null&&S.size);if(_){const m=l(d),st=b(d,!0);_=!P(m,st)}_||s.forEach(m=>m.delete(d))}a(d)}})};a(n)},$=(n,...s)=>{let u=!0;const r=i=>R(b(i)),c=(i,...d)=>{let S;if(i===n){if(!C(i))throw new Error("atom not writable");const y=l(i),_=g(i,d[0]);P(y,_)||W(i)}else S=$(i,...d);if(!u){const y=j();(E?"production":void 0)!=="production"&&f.forEach(_=>_({type:"async-write",flushed:y}))}return S},a=n.write(r,c,...s);return u=!1,a},I=(n,...s)=>{const u=$(n,...s),r=j();return(E?"production":void 0)!=="production"&&f.forEach(c=>c({type:"write",flushed:r})),u},N=(n,s,u)=>{var r;const c=u||[];(r=l(n))==null||r.d.forEach((i,d)=>{const S=e.get(d);S?S.t.add(n):d!==n&&N(d,n,c)}),b(n);const a={t:new Set(s&&[s]),l:new Set};if(e.set(n,a),(E?"production":void 0)!=="production"&&h.add(n),V(n)&&n.onMount){const{onMount:i}=n;c.push(()=>{const d=i((...S)=>I(n,...S));d&&(a.u=d)})}return u||c.forEach(i=>i()),a},D=n=>{var s;const u=(s=e.get(n))==null?void 0:s.u;u&&u(),e.delete(n),(E?"production":void 0)!=="production"&&h.delete(n);const r=l(n);r?(O(r)&&H(r.v),r.d.forEach((c,a)=>{if(a!==n){const i=e.get(a);i&&(i.t.delete(n),k(a,i)&&D(a))}})):(E?"production":void 0)!=="production"&&console.warn("[Bug] could not find atom state to unmount",n)},q=(n,s,u)=>{const r=new Set(s.d.keys());u==null||u.forEach((c,a)=>{if(r.has(a)){r.delete(a);return}const i=e.get(a);i&&(i.t.delete(n),k(a,i)&&D(a))}),r.forEach(c=>{const a=e.get(c);a?a.t.add(n):e.has(n)&&N(c,n)})},j=()=>{let n;for((E?"production":void 0)!=="production"&&(n=new Set);o.size;){const s=Array.from(o);o.clear(),s.forEach(([u,r])=>{const c=l(u);if(c){const a=e.get(u);a&&c.d!==(r==null?void 0:r.d)&&q(u,c,r==null?void 0:r.d),a&&!(!O(r)&&(P(r,c)||G(r,c)))&&(a.l.forEach(i=>i()),(E?"production":void 0)!=="production"&&n.add(u))}else(E?"production":void 0)!=="production"&&console.warn("[Bug] no atom state to flush")})}if((E?"production":void 0)!=="production")return n},x=(n,s)=>{const u=ot(n),r=j(),c=u.l;return c.add(s),(E?"production":void 0)!=="production"&&f.forEach(a=>a({type:"sub",flushed:r})),()=>{c.delete(s),rt(n),(E?"production":void 0)!=="production"&&f.forEach(a=>a({type:"unsub"}))}};return(E?"production":void 0)!=="production"?{get:F,set:I,sub:x,dev_subscribe_store:(n,s)=>{if(s!==2)throw new Error("The current StoreListener revision is 2.");return f.add(n),()=>{f.delete(n)}},dev_get_mounted_atoms:()=>h.values(),dev_get_atom_state:n=>t.get(n),dev_get_mounted:n=>e.get(n),dev_restore_atoms:n=>{for(const[u,r]of n)C(u)&&(g(u,r),W(u));const s=j();f.forEach(u=>u({type:"restore",flushed:s}))}}:{get:F,set:I,sub:x}};let U;(E?"production":void 0)!=="production"&&(typeof globalThis.__NUMBER_OF_JOTAI_INSTANCES__=="number"?++globalThis.__NUMBER_OF_JOTAI_INSTANCES__:globalThis.__NUMBER_OF_JOTAI_INSTANCES__=1);const tt=()=>(U||((E?"production":void 0)!=="production"&&globalThis.__NUMBER_OF_JOTAI_INSTANCES__!==1&&console.warn("Detected multiple Jotai instances. It may cause unexpected behavior with the default store. https://github.com/pmndrs/jotai/discussions/2044"),U=dt()),U);var at={BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const ht=M.createContext(void 0),et=t=>{const e=M.useContext(ht);return(t==null?void 0:t.store)||e||tt()},vt=t=>typeof(t==null?void 0:t.then)=="function",pt=it.use||(t=>{if(t.status==="pending")throw t;if(t.status==="fulfilled")return t.value;throw t.status==="rejected"?t.reason:(t.status="pending",t.then(e=>{t.status="fulfilled",t.value=e},e=>{t.status="rejected",t.reason=e}),t)});function wt(t,e){const o=et(e),[[f,h,l],w]=M.useReducer(g=>{const A=o.get(t);return Object.is(g[0],A)&&g[1]===o&&g[2]===t?g:[A,o,t]},void 0,()=>[o.get(t),o,t]);let v=f;(h!==o||l!==t)&&(w(),v=o.get(t));const p=e==null?void 0:e.delay;return M.useEffect(()=>{const g=o.sub(t,()=>{if(typeof p=="number"){setTimeout(w,p);return}w()});return w(),g},[o,t,p]),M.useDebugValue(v),vt(v)?pt(v):v}function yt(t,e){const o=et(e);return M.useCallback((...h)=>{if((at?"production":void 0)!=="production"&&!("write"in t))throw new Error("not writable atom");return o.set(t,...h)},[o,t])}function It(t,e){return[wt(t,e),yt(t,e)]}var gt={BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const _t=Symbol(),z=(t,e,o)=>(e.has(o)?e:e.set(o,t())).get(o),St=new WeakMap,Et=(t,e,o,f)=>{const h=z(()=>new WeakMap,St,e),l=z(()=>new WeakMap,h,o);return z(t,l,f)};function jt(t,e,o=Object.is){return Et(()=>{const f=Symbol(),h=([w,v])=>{if(v===f)return e(w);const p=e(w,v);return o(v,p)?v:p},l=B(w=>{const v=w(l),p=w(t);return p instanceof Promise||v instanceof Promise?Promise.all([p,v]).then(h):h([p,v])});return l.init=f,l},t,e,o)}const mt=t=>typeof(t==null?void 0:t.then)=="function";function At(t){let e,o;const f={getItem:(h,l)=>{var w,v;const p=A=>{if(A=A||"",e!==A){try{o=JSON.parse(A)}catch{return l}e=A}return o},g=(v=(w=t())==null?void 0:w.getItem(h))!=null?v:null;return mt(g)?g.then(p):p(g)},setItem:(h,l)=>{var w;return(w=t())==null?void 0:w.setItem(h,JSON.stringify(l))},removeItem:h=>{var l;return(l=t())==null?void 0:l.removeItem(h)}};return typeof window<"u"&&typeof window.addEventListener=="function"&&window.Storage&&(f.subscribe=(h,l,w)=>{if(!(t()instanceof window.Storage))return()=>{};const v=p=>{if(p.storageArea===t()&&p.key===h){let g;try{g=JSON.parse(p.newValue||"")}catch{g=w}l(g)}};return window.addEventListener("storage",v),()=>{window.removeEventListener("storage",v)}}),f}const bt=At(()=>typeof window<"u"?window.localStorage:void 0);function Rt(t,e,o=bt,f){const h=f==null?void 0:f.getOnInit,l=B(h?o.getItem(t,e):e);return(gt?"production":void 0)!=="production"&&(l.debugPrivate=!0),l.onMount=v=>{h||v(o.getItem(t,e));let p;return o.subscribe&&(p=o.subscribe(t,v,e)),p},B(v=>v(l),(v,p,g)=>{const A=typeof g=="function"?g(v(l)):g;return A===_t?(p(l,e),o.removeItem(t)):A instanceof Promise?A.then(b=>(p(l,b),o.setItem(t,b))):(p(l,A),o.setItem(t,A))})}const Tt=tt();var kt=typeof window>"u"||"Deno"in window;function Nt(){}function Dt(t,e){return typeof t=="function"?t(e):t}function Ct(t){return typeof t=="number"&&t>=0&&t!==1/0}function Vt(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Ut(t,e){const{type:o="all",exact:f,fetchStatus:h,predicate:l,queryKey:w,stale:v}=t;if(w){if(f){if(e.queryHash!==Ot(w,e.options))return!1}else if(!K(e.queryKey,w))return!1}if(o!=="all"){const p=e.isActive();if(o==="active"&&!p||o==="inactive"&&p)return!1}return!(typeof v=="boolean"&&e.isStale()!==v||typeof h<"u"&&h!==e.state.fetchStatus||l&&!l(e))}function zt(t,e){const{exact:o,status:f,predicate:h,mutationKey:l}=t;if(l){if(!e.options.mutationKey)return!1;if(o){if(L(e.options.mutationKey)!==L(l))return!1}else if(!K(e.options.mutationKey,l))return!1}return!(f&&e.state.status!==f||h&&!h(e))}function Ot(t,e){return((e==null?void 0:e.queryKeyHashFn)||L)(t)}function L(t){return JSON.stringify(t,(e,o)=>J(o)?Object.keys(o).sort().reduce((f,h)=>(f[h]=o[h],f),{}):o)}function K(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?!Object.keys(e).some(o=>!K(t[o],e[o])):!1}function nt(t,e){if(t===e)return t;const o=X(t)&&X(e);if(o||J(t)&&J(e)){const f=o?t.length:Object.keys(t).length,h=o?e:Object.keys(e),l=h.length,w=o?[]:{};let v=0;for(let p=0;p<l;p++){const g=o?p:h[p];w[g]=nt(t[g],e[g]),w[g]===t[g]&&v++}return f===l&&v===f?t:w}return e}function Bt(t,e){if(t&&!e||e&&!t)return!1;for(const o in t)if(t[o]!==e[o])return!1;return!0}function X(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function J(t){if(!Z(t))return!1;const e=t.constructor;if(typeof e>"u")return!0;const o=e.prototype;return!(!Z(o)||!o.hasOwnProperty("isPrototypeOf"))}function Z(t){return Object.prototype.toString.call(t)==="[object Object]"}function Mt(t){return new Promise(e=>{setTimeout(e,t)})}function Lt(t){Mt(0).then(t)}function Jt(t,e,o){return typeof o.structuralSharing=="function"?o.structuralSharing(t,e):o.structuralSharing!==!1?nt(t,e):e}function Kt(t){return t}function Ft(t,e,o=0){const f=[...t,e];return o&&f.length>o?f.slice(1):f}function Wt(t,e,o=0){const f=[e,...t];return o&&f.length>o?f.slice(0,-1):f}export{B as a,Rt as b,yt as c,et as d,Bt as e,It as f,Ct as g,L as h,kt as i,Tt as j,Kt as k,Mt as l,Lt as m,Nt as n,Ot as o,Ut as p,zt as q,Jt as r,jt as s,Vt as t,wt as u,Wt as v,Ft as w,Dt as x,K as y,tt as z};
